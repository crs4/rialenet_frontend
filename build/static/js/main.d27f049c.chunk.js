(this["webpackJsonptela-frontend"]=this["webpackJsonptela-frontend"]||[]).push([[0],{136:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),s=n(23),o=n.n(s),i=(n(91),n(92),n(12)),l=n.n(i),u=(n(36),n(20)),d=n(84),j=n(17),b=(n(102),n(83)),h=Object(b.a)({name:"userTasks",initialState:{user:null,tasks:[],studentsProfile:[]},reducers:{willLogin:function(e,t){return e},willLogout:function(e,t){return e},willGetUserProfile:function(e,t){return e},willLoadTasks:function(e,t){return e},willCreateTask:function(e,t){return e},willCreateTransaction:function(e,t){return e},willLoadStudentsProfile:function(e,t){return e},didGetUserProfile:function(e,t){e.user=t.payload},didLogout:function(e){e.user=null,e.tasks=[],localStorage.removeItem("passcode")},didLoadTasks:function(e,t){e.tasks=t.payload},didLoadStudentsProfile:function(e,t){e.studentsProfile=t.payload}}}),x=h.actions,f=h.reducer,O=function(e){return e.userTasks.tasks},p=function(e){return e.userTasks.user},m=n(158),g=n(138),v=n(139),y=n(140),w=n(141),k=n(142),C=n(159),T=n(160),S=n(161),N=n(143),_=function(e){var t=e.className,n=e.section,r=e.showMenu,s=void 0!==r&&r,o=Object(m.a)("frontend",{useSuspense:!1}),i=o.t,l=(o.i18n,void 0!=i(n)?i(n):"Forum"),d=c.a.useState(!1),b=Object(u.a)(d,2),h=b[0],f=b[1],O=Object(j.d)(),_=Object(j.e)(p);return console.log("UserProfile:",_),Object(a.jsxs)(g.a,{style:{marginBottom:"10px"},className:t,color:"primary",light:!0,expand:"md",children:[Object(a.jsxs)(v.a,{className:"text-white font-weight-bold",href:"/",children:["RIALENET - ",l]}),s&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(y.a,{onClick:function(){return f(!h)}}),Object(a.jsxs)(w.a,{isOpen:h,navbar:!0,children:[Object(a.jsx)(k.a,{className:"mr-auto",navbar:!0}),Object(a.jsx)(k.a,{navbar:!0,children:null!=_&&null!=_.name&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(C.a,{nav:!0,inNavbar:!0,children:[Object(a.jsxs)(T.a,{className:"text-white",nav:!0,caret:!0,children:[_.name.first," ",_.name.last]}),Object(a.jsx)(S.a,{right:!0,children:Object(a.jsx)(N.a,{onClick:function(){O(x.willLogout(""))},children:"Logout"})})]})})})]})]})]})},E=n(144),A=n(145),L=n(30),I=n(48),P=n(29),U=n(79),F=function e(){Object(U.a)(this,e)};F.admin=1,F.teacher=2,F.student=3;var W=function(e){var t=e.active,n=e.role,r=Object(m.a)("frontend",{useSuspense:!1}),c=r.t;r.i18n;return console.log("Role in sidebar ->",n,F.teacher,n==F.teacher||n==F.admin),Object(a.jsx)("div",{style:{border:"0px solid #000",width:"240px",position:"absolute",backgroundColor:"#f1f1f1",bottom:0,top:56},children:Object(a.jsxs)(k.a,{vertical:!0,className:"list-unstyled pb-3",children:[Object(a.jsx)(E.a,{active:"public_area"===t,className:"mb-1",children:Object(a.jsxs)(A.a,{className:"public_area"===t?"text-primary":"text-secondary",style:{textDecoration:"none",fontWeight:"bolder"},tag:P.a,to:"/forum",children:[Object(a.jsx)(L.a,{icon:I.a,className:"mr-2"})," ",c("public_area")]})}),(n==F.student||n==F.admin)&&Object(a.jsx)(E.a,{active:"student_dashboard"===t,className:"mb-1",children:Object(a.jsxs)(A.a,{className:"student_dashboard"===t?"text-primary":"text-secondary",style:{textDecoration:"none",fontWeight:"bolder"},tag:P.a,to:"/student_dashboard",children:[Object(a.jsx)(L.a,{icon:I.a,className:"mr-2"})," ",c("student_area")]})}),(n==F.teacher||n==F.admin)&&Object(a.jsx)(E.a,{active:"teacher_dashboard"===t,className:"mb-1",children:Object(a.jsxs)(A.a,{className:"teacher_dashboard"===t?"text-primary":"text-secondary",style:{textDecoration:"none",fontWeight:"bolder"},tag:P.a,to:"/teacher_dashboard",children:[Object(a.jsx)(L.a,{icon:I.a,className:"mr-2"})," ",c("teacher_area")]})})]})})},G=function(e){var t=e.children,n=e.className,r=e.fluid,c=void 0!==r&&r;return Object(a.jsx)("div",{className:n,style:{border:"0px solid #000",position:"absolute",backgroundColor:"white",bottom:0,top:56,left:c?0:240,right:0},children:t})},R=n(146),D=n(147),B=n(148),M=n(149),z=n(132),J=function(e){var t=Object(r.useState)([]),n=Object(u.a)(t,2),c=n[0],s=n[1],o=Object(j.d)(),i=Object(j.e)(O),l=Object(j.e)(p),b=Object(m.a)("frontend",{useSuspense:!1}),h=b.t,f=(b.i18n,0),g=new URLSearchParams(window.location.search),v=localStorage.getItem("passcode"),y=g.get("passcode");console.log("params:",v);null!=y&&z(v);c.map((function(e){f+=1,e.replies&&e.replies.map((function(e){return f+=1}))}));return Object(r.useEffect)((function(){o(x.willGetUserProfile()),o(x.willLoadTasks())}),[]),Object(r.useEffect)((function(){s(null!=i?i.map((function(e){return{userId:"01a",comId:"012",fullName:"Riya Negi",avatarUrl:"https://ui-avatars.com/api/name=Riya&background=random",text:e.goal.name,replies:[]}})):[])}),[i]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(_,{className:"mb-0 text-white",section:"public_area",showMenu:!0}),Object(a.jsx)(W,{active:"public_area",role:null!=l?l.role_id:null}),Object(a.jsx)(G,{children:Object(a.jsxs)(R.a,{className:"mb-4",style:{padding:"10px",borderColor:"#007bff"},children:[Object(a.jsx)(D.a,{style:{backgroundColor:"#007bff",borderColor:"#007bff",paddingBottom:0,color:"white"},children:Object(a.jsxs)(B.a,{children:[h("public_area")," (n.",f," ",h("comments"),")"]})}),Object(a.jsx)(M.a,{children:Object(a.jsx)(d.a,{currentUser:{userId:"01a",avatarUrl:"https://ui-avatars.com/api/name=Riya&background=random",name:"xyz"},commentsArray:c||[],setComment:s,signinUrl:"/signin",signupUrl:"/signup"})})]})})]})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,162)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},q=(n(135),n(18)),V=n(80),H=n(85),Q=n(21),X=n(71),Y=n(16),Z=n(19),$=l.a.mark(se),ee=l.a.mark(oe),te=l.a.mark(ie),ne=l.a.mark(le),ae=l.a.mark(ue),re=l.a.mark(de),ce=l.a.mark(je);function se(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.d)(x.willGetUserProfile.type,ie);case 2:return e.next=4,Object(Y.d)(x.willLogout.type,oe);case 4:return e.next=6,Object(Y.d)(x.willLoadTasks.type,de);case 6:return e.next=8,Object(Y.d)(x.willLoadStudentsProfile.type,je);case 8:return e.next=10,Object(Y.d)(x.willCreateTask.type,le);case 10:return e.next=12,Object(Y.d)(x.willCreateTransaction.type,ue);case 12:case"end":return e.stop()}}),$)}function oe(e){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.c)(x.didLogout());case 2:return e.next=4,Object(Y.c)(Object(Z.d)("/logout"));case 4:case"end":return e.stop()}}),ee)}function ie(e){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/userprofile",e.prev=1,e.next=4,Object(Y.b)((function(){return fetch("/userprofile").then((function(e){return e.json()})).then((function(e){return e}))}));case 4:return t=e.sent,n=null==t?[]:t,e.next=8,Object(Y.c)(x.didGetUserProfile(n));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Object(Y.c)(x.didGetUserProfile(null));case 14:case"end":return e.stop()}}),te,null,[[1,10]])}function le(e){var t,n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return"/newtask",t=e.payload,a.prev=2,a.next=5,Object(Y.b)((function(){return fetch("/newtask",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({content:t})}).then((function(e){return e.json()})).then((function(e){return e}))}));case 5:n=a.sent,console.log("SAGA NEW TASK response:",n),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),console.log("SAGA NEW TASK error:".error);case 12:case"end":return a.stop()}}),ne,null,[[2,9]])}function ue(e){var t,n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return"/newtransaction",t=e.payload,a.prev=2,a.next=5,Object(Y.b)((function(){return fetch("/newtransaction",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({content:t})}).then((function(e){return e.json()})).then((function(e){return e}))}));case 5:n=a.sent,console.log("SAGA NEW TRANSACTION response:",n),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),console.log("SAGA NEW TRANSACTION error:".error);case 12:case"end":return a.stop()}}),ae,null,[[2,9]])}function de(e){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/tasks",e.prev=1,e.next=4,Object(Y.b)((function(){return fetch("/tasks").then((function(e){return e.json()})).then((function(e){return e}))}));case 4:return t=e.sent,n=null==t?[]:t.tasks,e.next=8,Object(Y.c)(x.didLoadTasks(n));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Object(Y.c)(x.didLoadTasks([]));case 14:case"end":return e.stop()}}),re,null,[[1,10]])}function je(e){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/students",e.prev=1,e.next=4,Object(Y.b)((function(){return fetch("/students").then((function(e){return e.json()})).then((function(e){return e}))}));case 4:return t=e.sent,n=null==t?[]:t,e.next=8,Object(Y.c)(x.didLoadStudentsProfile(n));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Object(Y.c)(x.didLoadStudentsProfile([]));case 14:case"end":return e.stop()}}),ce,null,[[1,10]])}var be=l.a.mark(he);function he(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("in root saga"),e.next=3,Object(Y.a)([se()]);case 3:case"end":return e.stop()}}),be)}var xe=he,fe=n(33),Oe=Object(Q.a)(),pe=function(e){var t,n=Object(H.a)(),a=[Object(X.a)(Oe),n],r=[q.applyMiddleware.apply(void 0,a)],c=V.composeWithDevTools.apply(void 0,r),s=(t=Oe,Object(q.combineReducers)({router:Object(fe.b)(t),userTasks:f})),o=Object(q.createStore)(s,e,c);return n.run(xe),o},me=n(13),ge=n(150),ve=n(151),ye=n(152),we=n(153),ke=n(154),Ce=n(155),Te=n(76),Se=n(45),Ne=function(e){var t=Object(m.a)("frontend",{useSuspense:!1}),n=t.t,c=(t.i18n,["cannotAnswer","needClarification","notSure","myAnswer"]),s=Object(r.useState)(e.transaction.selectedChoiceIndex||-1),o=Object(u.a)(s,2),i=o[0],l=o[1],d=Object(r.useState)(""),j=Object(u.a)(d,2),b=j[0],h=j[1],x=function(t,n,r){return Object(a.jsxs)(ge.a,{check:!0,disabled:e.readonly,children:[Object(a.jsx)(ve.a,{disabled:e.readonly,name:t,value:r,onChange:function(t){return function(t){console.log("selected choice:",t.target.value),l(t.target.value),e.onUpdate&&i>=0&&e.onUpdate(c[i],b)}(t)},checked:i==r,type:"radio"})," ",Object(a.jsx)(ye.a,{check:!0,children:n})]})};return Object(a.jsxs)(we.a,{style:{border:"1px solid #007bff",padding:"10px",margin:"10px"},children:[Object(a.jsx)(ye.a,{children:Object(a.jsx)("b",{children:n("selectAnswer")})}),c.map((function(e,t){return x("studentChoice",n(e),t)})),i>=0&&Object(a.jsx)(ge.a,{children:Object(a.jsxs)("div",{style:{marginTop:"20px"},children:[Object(a.jsx)(ye.a,{for:"studentAnswerText",children:Object(a.jsx)("b",{children:n("comment_on_".concat(c[i]))})}),Object(a.jsx)(ve.a,{disabled:e.readonly,id:"studentAnswerText",name:"text",type:"textarea",onChange:function(t){return function(t){console.log("current text:",t.target.value),h(t.target.value),e.onUpdate&&i>=0&&e.onUpdate(c[i],t.target.value)}(t)},value:b})]})}),Object(a.jsx)(ge.a,{children:Object(a.jsxs)("div",{style:{marginTop:"20px"},children:[Object(a.jsx)(ye.a,{for:"teacherAnswerText",children:Object(a.jsx)("b",{children:n("teacherFeedback")})}),Object(a.jsx)(ve.a,{disabled:e.readonly,id:"teacherAnswerText",name:"text",type:"textarea",value:"RISPOSTA"})]})})]})},_e=function(e){var t=Object(r.useState)(!1),n=Object(u.a)(t,2),c=n[0],s=n[1],o=function(){return s(!c)},i=Object(m.a)("frontend",{useSuspense:!1}),l=i.t,d=(i.i18n,Object(j.d)()),b=Object(r.useState)(null),h=Object(u.a)(b,2),f=h[0],O=h[1];return function(){var t=e.task.goal.name,n=e.task.goal.description;return Object(a.jsxs)(R.a,{className:"mb-4",style:{padding:"10px",borderColor:"#007bff"},children:[Object(a.jsx)(D.a,{onClick:function(){o()},style:{cursor:"pointer",backgroundColor:"#007bff",borderColor:"#007bff",paddingBottom:0,color:"white"},children:Object(a.jsx)(B.a,{children:Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignContent:"space-between"},children:[t,c?Object(a.jsx)(Se.b,{size:"1.6em",cursor:"pointer",color:"white",onClick:function(){o()}}):Object(a.jsx)(Se.a,{size:"1.6em",cursor:"pointer",color:"white",onClick:function(){o()}})]})})}),Object(a.jsxs)(w.a,{isOpen:c,children:[n&&Object(a.jsx)(ke.a,{style:{padding:"10px",margin:"10px",backgroundColor:"#EEEEEE"},children:n}),Object(a.jsx)(M.a,{children:Object(a.jsxs)(we.a,{children:[e.task.transactions&&e.task.transactions.map((function(e){return Object(a.jsx)(Ne,{readonly:!0,transaction:e})})),Object(a.jsx)(Ne,{onUpdate:function(e,t){return O({label:e,message:t})},transaction:{readOnly:!1,selectedChoiceIndex:-1}})]})}),Object(a.jsx)(Ce.a,{children:Object(a.jsx)(Te.a,{color:"primary",onClick:function(t){!function(){if(null!=f){var t={taskId:e.task.id,content:{label:f.label,message:f.message}};d(x.willCreateTransaction(t))}}()},children:l("send")})})]})]})}()},Ee=function(e){var t=Object(j.e)(p),n=Object(j.e)(O);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(_,{className:"mb-0 text-white",section:"student_area",showMenu:!0}),Object(a.jsx)(W,{active:"student_dashboard",role:null!=t?t.role_id:null}),Object(a.jsx)(G,{children:n&&n.map((function(e,t){return Object(a.jsx)(_e,{task:e})}))})]})},Ae=function(e){var t=Object(m.a)("frontend",{useSuspense:!1}),n=t.t,c=(t.i18n,Object(r.useState)("")),s=Object(u.a)(c,2),o=s[0],i=s[1],l=Object(r.useState)(""),d=Object(u.a)(l,2),b=d[0],h=d[1],f=Object(j.d)();return Object(a.jsxs)(R.a,{className:"mb-4",style:{padding:"10px",borderColor:"#007bff"},children:[Object(a.jsx)(B.a,{children:n("teacherCreateNewTask")}),Object(a.jsx)(M.a,{children:Object(a.jsxs)(we.a,{children:[Object(a.jsx)(ge.a,{children:Object(a.jsxs)("div",{style:{marginTop:"20px"},children:[Object(a.jsx)(ye.a,{for:"teacherTaskTitle",children:Object(a.jsx)("b",{children:n("teacherTaskTitle")})}),Object(a.jsx)(ve.a,{id:"teacherTaskTitle",name:"text",type:"text",onChange:function(e){return function(e){i(e.target.value)}(e)},value:o})]})}),Object(a.jsx)(ge.a,{children:Object(a.jsxs)("div",{style:{marginTop:"20px"},children:[Object(a.jsx)(ye.a,{for:"teacherTaskDescription",children:Object(a.jsx)("b",{children:n("teacherTaskDescription")})}),Object(a.jsx)(ve.a,{id:"teacherTaskDescription",name:"text",type:"textarea",onChange:function(e){return function(e){h(e.target.value)}(e)},value:b})]})})]})}),Object(a.jsx)(Ce.a,{children:Object(a.jsx)(Te.a,{color:"primary",onClick:function(e){f(x.willCreateTask({name:o,description:b}))},children:n("send")})})]})},Le=n(156),Ie=n(157),Pe=function(e){var t=Object(j.e)(p),n=Object(r.useState)("0"),c=Object(u.a)(n,2),s=c[0],o=c[1],i=Object(m.a)("frontend",{useSuspense:!1}),l=i.t;i.i18n;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(_,{className:"mb-0 text-white",section:"teacher_area",showMenu:!0}),Object(a.jsx)(W,{active:"teacher_dashboard",role:null!=t?t.role_id:null}),Object(a.jsxs)(G,{children:[Object(a.jsxs)(k.a,{tabs:!0,children:[Object(a.jsx)(E.a,{children:Object(a.jsx)(A.a,{style:"0"===s?{cursor:"arrow",fontWeight:"bold",background:"#EEEEEE"}:{cursor:"pointer",fontWeight:"normal"},onClick:function(){o("0")},children:l("students_answers")})}),Object(a.jsx)(E.a,{children:Object(a.jsx)(A.a,{style:"1"===s?{cursor:"arrow",fontWeight:"bold",background:"#EEEEEE"}:{cursor:"pointer",fontWeight:"normal"},onClick:function(){o("1")},children:l("students_profile")})})]}),Object(a.jsxs)(Le.a,{activeTab:s,children:[Object(a.jsx)(Ie.a,{tabId:"0",children:Object(a.jsx)(Ae,{})}),Object(a.jsx)(Ie.a,{tabId:"1",children:Object(a.jsx)("p",{children:"Profilo degli studenti"})})]})]})]})},Ue=function(){var e=Object(m.a)("frontend",{useSuspense:!1}),t=e.t,n=(e.i18n,Object(r.useState)(null)),c=Object(u.a)(n,2),s=c[0],o=c[1];Object(r.useEffect)((function(){localStorage.setItem("passcode",s)}),[s]);var i=function(e){console.log("entered:",e.target.value),function(e){var t="abcdefghijklmnopqrstuvwxyz".toUpperCase();try{var n=e.trim().toUpperCase();if(8!=n.length)throw"Invalid";for(var a=0,r=0;r<n.length-1;r++)a+=t.indexOf(n.charAt(r));var c=(a-=t.indexOf(n.charAt(7)))%t.length==0;o(c?n:null)}catch(s){o(null)}}(e.target.value)};return Object(a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:Object(a.jsxs)(R.a,{className:"mb-4",style:{borderColor:"#007bff"},children:[Object(a.jsx)(D.a,{style:{backgroundColor:"#007bff",borderColor:"#007bff",paddingBottom:0,color:"white"},children:Object(a.jsx)(B.a,{style:{textAlign:"center"},children:t("platform_title")})}),Object(a.jsx)(M.a,{children:Object(a.jsx)(ve.a,{onChange:function(e){return i(e)},type:"text",name:"passcode",id:"passcode",placeholder:t("passcode_enter")})}),Object(a.jsx)(Ce.a,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:s&&Object(a.jsx)("a",{href:"/connect?passcode=".concat(s),children:t("connect_to_wenet")})})]})})},Fe=function(){return Object(a.jsx)(fe.a,{history:Oe,children:Object(a.jsxs)(me.c,{children:[Object(a.jsx)(me.a,{path:"/forum",children:Object(a.jsx)(J,{})}),Object(a.jsx)(me.a,{path:"/student_dashboard",children:Object(a.jsx)(Ee,{})}),Object(a.jsx)(me.a,{path:"/teacher_dashboard",children:Object(a.jsx)(Pe,{})}),Object(a.jsx)(me.a,{path:"/",children:Object(a.jsx)(Ue,{})})]})})};function We(){return Object(a.jsx)(j.a,{store:pe({}),children:Object(a.jsx)(Fe,{})})}var Ge=n(59),Re=n(39),De=n(81);n(137);Ge.a.use(De.a).use(Re.e).init({ns:["tl","frontend"],defaultNS:"tl",fallbackLng:"it",debug:!0,interpolation:{escapeValue:!1}});var Be=Ge.a;"it-IT"!==(window.navigator.userLanguage||window.navigator.language)?Be.changeLanguage("en-US"):Be.changeLanguage("it-IT"),o.a.render(Object(a.jsx)(c.a.Fragment,{children:Object(a.jsx)(We,{})}),document.getElementById("root")),K()},91:function(e,t,n){}},[[136,1,2]]]);
//# sourceMappingURL=main.d27f049c.chunk.js.map