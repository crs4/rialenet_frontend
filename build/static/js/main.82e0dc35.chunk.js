(this["webpackJsonptela-frontend"]=this["webpackJsonptela-frontend"]||[]).push([[0],{116:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n(0),c=n.n(a),s=n(22),o=n.n(s),i=(n(76),n(77),n(17)),l=n.n(i),u=(n(62),n(30)),d=n(69),j=n(21),b=(n(87),n(68)),f=Object(b.a)({name:"userTasks",initialState:{user:null,tasks:[]},reducers:{willLogin:function(e,t){return e},willLogout:function(e,t){return e},willGetUserProfile:function(e,t){return e},willLoadTasks:function(e,t){return e},didGetUserProfile:function(e,t){e.user=t.payload},didLogout:function(e){e.user=null,e.tasks=[],localStorage.removeItem("passcode")},didLoadTasks:function(e,t){e.tasks=t.payload}}}),h=f.actions,p=f.reducer,x=function(e){return e.userTasks.tasks},O=function(e){return e.userTasks.user},m=n(117),g=n(118),v=n(119),w=n(120),y=n(121),k=n(132),N=n(131),C=n(133),L=n(122),I=function(e){var t=e.className,n=e.section,a=e.showMenu,s=void 0!==a&&a,o=void 0!=n?n:"Forum",i=c.a.useState(!1),l=Object(u.a)(i,2),d=l[0],b=l[1],f=Object(j.d)(),p=Object(j.e)(O);return console.log("UserProfile:",p),Object(r.jsxs)(m.a,{className:t,color:"primary",light:!0,expand:"md",children:[Object(r.jsxs)(g.a,{className:"text-white font-weight-bold",href:"/",children:["RIALENET - ",o]}),s&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(v.a,{onClick:function(){return b(!d)}}),Object(r.jsxs)(w.a,{isOpen:d,navbar:!0,children:[Object(r.jsx)(y.a,{className:"mr-auto",navbar:!0}),Object(r.jsx)(y.a,{navbar:!0,children:null!=p&&Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(k.a,{nav:!0,inNavbar:!0,children:[Object(r.jsxs)(N.a,{className:"text-white",nav:!0,caret:!0,children:[p.name.first," ",p.name.last]}),Object(r.jsx)(C.a,{right:!0,children:Object(r.jsx)(L.a,{onClick:function(){f(h.willLogout(""))},children:"Logout"})})]})})})]})]})]})},T=n(123),U=n(124),F=n(32),P=n(66),S=n(31),E=function(e){var t=e.active;return Object(r.jsx)("div",{style:{border:"0px solid #000",width:"240px",position:"absolute",backgroundColor:"#f1f1f1",bottom:0,top:56},children:Object(r.jsx)(y.a,{vertical:!0,className:"list-unstyled pb-3",children:Object(r.jsx)(T.a,{active:"dashboard"===t,className:"mb-1",children:Object(r.jsxs)(U.a,{className:"dashboard"===t?"text-primary":"text-secondary",style:{textDecoration:"none",fontWeight:"bolder"},tag:S.a,to:"/dashboard",children:[Object(r.jsx)(F.a,{icon:P.a,className:"mr-2"})," Dashboard"]})})})})},R=function(e){var t=e.children,n=e.className,a=e.fluid,c=void 0!==a&&a;return Object(r.jsx)("div",{className:n,style:{border:"0px solid #000",position:"absolute",backgroundColor:"white",bottom:0,top:56,left:c?0:240,right:0},children:t})},A=n(125),D=n(126),G=n(127),B=n(128),W=n(112),M=function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),c=n[0],s=n[1],o=Object(j.d)(),i=Object(j.e)(x),l=0,b=new URLSearchParams(window.location.search),f=localStorage.getItem("passcode"),p=b.get("passcode");console.log("params:",f);var O=null!=p&&W(f)==p;c.map((function(e){l+=1,e.replies&&e.replies.map((function(e){return l+=1}))}));return Object(a.useEffect)((function(){o(h.willGetUserProfile()),o(h.willLoadTasks())}),[]),Object(a.useEffect)((function(){s(null!=i?i.map((function(e){return{userId:"01a",comId:"012",fullName:"Riya Negi",avatarUrl:"https://ui-avatars.com/api/name=Riya&background=random",text:e.goal.name,replies:[]}})):[])}),[i]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(I,{className:"mb-0 text-white",section:"Forum",showMenu:!0}),Object(r.jsx)(E,{active:"dashboard"}),Object(r.jsx)(R,{children:Object(r.jsxs)(A.a,{className:"mb-4",style:{padding:"10px",borderColor:"#007bff"},children:[Object(r.jsx)(D.a,{style:{backgroundColor:"#007bff",borderColor:"#007bff",paddingBottom:0,color:"white"},children:Object(r.jsxs)(G.a,{children:["RIALENET - Forum degli studenti (n.",l," Commenti) ",O?"OK":"FORBIDDEN",f&&Object(r.jsx)("div",{className:"pull-right",children:f})]})}),Object(r.jsx)(B.a,{children:Object(r.jsx)(d.a,{currentUser:{userId:"01a",avatarUrl:"https://ui-avatars.com/api/name=Riya&background=random",name:"xyz"},commentsArray:c||[],setComment:s,signinUrl:"/signin",signupUrl:"/signup"})})]})})]})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,134)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},J=(n(115),n(15)),q=n(67),K=n(70),H=n(18),Q=n(61),V=n(19),X=n(16),Y=l.a.mark(ee),Z=l.a.mark(te),$=l.a.mark(ne),_=l.a.mark(re);function ee(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(V.d)(h.willGetUserProfile.type,ne);case 2:return e.next=4,Object(V.d)(h.willLogout.type,te);case 4:return e.next=6,Object(V.d)(h.willLoadTasks.type,re);case 6:case"end":return e.stop()}}),Y)}function te(e){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(V.c)(h.didLogout());case 2:return e.next=4,Object(V.c)(Object(X.d)("/logout"));case 4:case"end":return e.stop()}}),Z)}function ne(e){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/userprofile",e.prev=1,e.next=4,Object(V.b)((function(){return fetch("/userprofile").then((function(e){return e.json()})).then((function(e){return e}))}));case 4:return t=e.sent,n=null==t?[]:t,e.next=8,Object(V.c)(h.didGetUserProfile(n));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Object(V.c)(h.didGetUserProfile(null));case 14:case"end":return e.stop()}}),$,null,[[1,10]])}function re(e){var t,n,r,a;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return e.payload,t=localStorage.getItem("passcode"),n="/tasks?passcode=".concat(t),c.prev=3,c.next=6,Object(V.b)((function(){return fetch(n).then((function(e){return e.json()})).then((function(e){return e}))}));case 6:return r=c.sent,a=null==r?[]:r.tasks,c.next=10,Object(V.c)(h.didLoadTasks(a));case 10:c.next=16;break;case 12:return c.prev=12,c.t0=c.catch(3),c.next=16,Object(V.c)(h.didLoadTasks([]));case 16:case"end":return c.stop()}}),_,null,[[3,12]])}var ae=l.a.mark(ce);function ce(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("in root saga"),e.next=3,Object(V.a)([ee()]);case 3:case"end":return e.stop()}}),ae)}var se=ce,oe=n(27),ie=Object(H.a)(),le=function(e){var t,n=Object(K.a)(),r=[Object(Q.a)(ie),n],a=[J.applyMiddleware.apply(void 0,r)],c=q.composeWithDevTools.apply(void 0,a),s=(t=ie,Object(J.combineReducers)({router:Object(oe.b)(t),userTasks:p})),o=Object(J.createStore)(s,e,c);return n.run(se),o},ue=n(11),de=n(129),je=n(130),be=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){localStorage.setItem("passcode",n)}),[n]);var s=function(e){console.log("entered:",e.target.value),function(e){var t="abcdefghijklmnopqrstuvwxyz".toUpperCase();try{var n=e.trim().toUpperCase();if(8!=n.length)throw"Invalid";for(var r=0,a=0;a<n.length-1;a++)r+=t.indexOf(n.charAt(a));var s=(r-=t.indexOf(n.charAt(7)))%t.length==0;c(s?n:null)}catch(o){c(null)}}(e.target.value)};return Object(r.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:Object(r.jsxs)(A.a,{className:"mb-4",style:{borderColor:"#007bff"},children:[Object(r.jsx)(D.a,{style:{backgroundColor:"#007bff",borderColor:"#007bff",paddingBottom:0,color:"white"},children:Object(r.jsx)(G.a,{style:{textAlign:"center"},children:"Riale Wenet Platform"})}),Object(r.jsx)(B.a,{children:Object(r.jsx)(de.a,{onChange:function(e){return s(e)},type:"text",name:"passcode",id:"passcode",placeholder:"enter a passcode"})}),Object(r.jsx)(je.a,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:n&&Object(r.jsx)("a",{href:"/connect?passcode=".concat(n),children:"Connect to WeNet"})})]})})},fe=function(){return Object(r.jsx)(oe.a,{history:ie,children:Object(r.jsxs)(ue.c,{children:[Object(r.jsx)(ue.a,{path:"/forum",children:Object(r.jsx)(M,{})}),Object(r.jsx)(ue.a,{path:"/",children:Object(r.jsx)(be,{})})]})})};function he(){return Object(r.jsx)(j.a,{store:le({}),children:Object(r.jsx)(fe,{})})}o.a.render(Object(r.jsx)(c.a.Fragment,{children:Object(r.jsx)(he,{})}),document.getElementById("root")),z()},76:function(e,t,n){}},[[116,1,2]]]);
//# sourceMappingURL=main.82e0dc35.chunk.js.map